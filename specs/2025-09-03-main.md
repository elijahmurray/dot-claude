# Python Command Detection Fix Feature Specification

**Date**: 2025-09-03  
**Feature**: Python Command Detection for Worktree Creation  
**Status**: Complete  

## Overview

Fixed the worktree creation script to properly detect and use the available Python command (python3 or python) on systems where 'python' may not exist but 'python3' does. This is a common scenario on modern macOS and Linux distributions.

## User Requirements

- Worktree creation script was failing with error: `.claude/scripts/worktree-create.sh: line 142: python: command not found`
- Script needs to work across different Python installation configurations  
- Should handle systems where only python3 is available (common on macOS)

## Technical Specifications

### Implementation Details
- Added runtime Python command detection logic before virtual environment creation
- Uses command availability checking to determine the correct Python executable  
- Falls back gracefully from python3 to python
- Provides clear error messaging if neither is available
- Uses `$PYTHON_CMD -m pip` pattern for better cross-platform compatibility

### Files Modified/Created
- `scripts/worktree-create.sh` - Added Python command detection logic (lines 143-151) and updated Python/pip calls

### Key Decisions Made
- Check for python3 first (more common on modern systems) before falling back to python
- Use `$PYTHON_CMD -m pip` instead of direct pip calls for consistency
- Exit with clear error message if no Python is found rather than failing silently
- Store detected command in PYTHON_CMD variable for consistent usage throughout script

## Testing Requirements

- Test on systems with only python3 available (macOS)
- Test on systems with only python available  
- Test on systems with both python and python3
- Verify clear error message when neither Python is installed
- Verify virtual environment creation works with detected command
- Verify pip install works with detected command

## Dependencies

No new dependencies - works with existing Python 3.x installations

## Future Considerations

- Could add Python version checking (ensure 3.8+ for compatibility)
- Consider caching Python command detection for repeated runs
- Pattern could be extracted as a reusable function
- Similar detection might be needed for pip/pip3 on some systems

## Implementation Notes

- Detection happens only when requirements.txt exists (Python projects)
- Pattern can be applied to other scripts in the dot-claude repository that use Python
- The fix ensures compatibility across different Unix-like systems without requiring system-specific configuration
